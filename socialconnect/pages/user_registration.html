<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create Account - FriendsVibe</title>
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fsocialconn7845back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.8"></script>
</head>
<body class="bg-background min-h-screen">
    <!-- Header Navigation -->
    <header class="bg-surface shadow-contextual-sm border-b border-secondary-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <a href="user_login.html" class="flex items-center space-x-2">
                        <div class="w-8 h-8 bg-gradient-to-br from-primary-500 to-primary-700 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"/>
                            </svg>
                        </div>
                        <span class="text-xl font-bold text-text-primary">FriendsVibe</span>
                    </a>
                </div>
                
                <!-- Login Link -->
                <div class="flex items-center">
                    <span class="text-text-secondary text-sm mr-2">Already have an account?</span>
                    <a href="user_login.html" class="text-primary-600 hover:text-primary-700 font-medium text-sm transition-colors duration-fast">
                        Login
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 py-8 px-4 sm:px-6 lg:px-8">
        <div class="max-w-md mx-auto">
            <!-- Registration Form Container -->
            <div class="bg-surface rounded-social shadow-contextual-md p-8">
                <!-- Form Header -->
                <div class="text-center mb-8">
                    <h1 class="text-2xl font-bold text-text-primary mb-2">Join FriendsVibe</h1>
                    <p class="text-text-secondary">Create your account and start connecting with others</p>
                </div>

                <!-- Registration Form -->
                <form id="registrationForm" class="space-y-6" novalidate>
                    <!-- Profile Picture Upload -->
                    <div class="text-center">
                        <div class="relative inline-block">
                            <div id="profilePreview" class="w-20 h-20 rounded-full bg-secondary-100 border-2 border-dashed border-secondary-300 flex items-center justify-center overflow-hidden">
                                <svg class="w-8 h-8 text-secondary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                                </svg>
                            </div>
                            <input type="file" id="profilePicture" name="profilePicture" accept="image/*" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" />
                        </div>
                        <p class="text-xs text-text-secondary mt-2">Upload profile picture (optional)</p>
                    </div>

                    <!-- Full Name -->
                    <div>
                        <label for="fullName" class="block text-sm font-medium text-text-primary mb-2">Full Name</label>
                        <input type="text" id="fullName" name="fullName" required class="w-full px-4 py-3 border border-secondary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-normal" placeholder="Enter your full name" />
                        <div id="fullNameError" class="hidden text-error-500 text-xs mt-1"></div>
                        <div id="fullNameSuccess" class="hidden text-success-500 text-xs mt-1">✓ Looks good!</div>
                    </div>

                    <!-- Username -->
                    <div>
                        <label for="username" class="block text-sm font-medium text-text-primary mb-2">Username</label>
                        <input type="text" id="username" name="username" required class="w-full px-4 py-3 border border-secondary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-normal" placeholder="Choose a unique username" />
                        <div id="usernameError" class="hidden text-error-500 text-xs mt-1"></div>
                        <div id="usernameSuccess" class="hidden text-success-500 text-xs mt-1">✓ Username is available!</div>
                    </div>

                    <!-- Email -->
                    <div>
                        <label for="email" class="block text-sm font-medium text-text-primary mb-2">Email Address</label>
                        <input type="email" id="email" name="email" required class="w-full px-4 py-3 border border-secondary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-normal" placeholder="Enter your email address" />
                        <div id="emailError" class="hidden text-error-500 text-xs mt-1"></div>
                        <div id="emailSuccess" class="hidden text-success-500 text-xs mt-1">✓ Valid email address!</div>
                    </div>

                    <!-- Password -->
                    <div>
                        <label for="password" class="block text-sm font-medium text-text-primary mb-2">Password</label>
                        <div class="relative">
                            <input type="password" id="password" name="password" required class="w-full px-4 py-3 border border-secondary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-normal pr-12" placeholder="Create a strong password" />
                            <button type="button" id="togglePassword" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-secondary-400 hover:text-secondary-600">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                </svg>
                            </button>
                        </div>
                        <div id="passwordError" class="hidden text-error-500 text-xs mt-1"></div>
                        <div id="passwordSuccess" class="hidden text-success-500 text-xs mt-1">✓ Strong password!</div>
                        <div class="text-xs text-text-secondary mt-1">Must be at least 8 characters with letters and numbers</div>
                    </div>

                    <!-- Confirm Password -->
                    <div>
                        <label for="confirmPassword" class="block text-sm font-medium text-text-primary mb-2">Confirm Password</label>
                        <input type="password" id="confirmPassword" name="confirmPassword" required class="w-full px-4 py-3 border border-secondary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-normal" placeholder="Confirm your password" />
                        <div id="confirmPasswordError" class="hidden text-error-500 text-xs mt-1"></div>
                        <div id="confirmPasswordSuccess" class="hidden text-success-500 text-xs mt-1">✓ Passwords match!</div>
                    </div>

                    <!-- Terms and Privacy -->
                    <div class="space-y-3">
                        <div class="flex items-start">
                            <input type="checkbox" id="termsAccepted" name="termsAccepted" required class="mt-1 h-4 w-4 text-primary-600 focus:ring-primary-500 border-secondary-300 rounded" />
                            <label for="termsAccepted" class="ml-3 text-sm text-text-secondary">
                                I agree to the <a href="javascript:void(0)" class="text-primary-600 hover:text-primary-700">Terms of Service</a>
                            </label>
                        </div>
                        <div class="flex items-start">
                            <input type="checkbox" id="privacyAccepted" name="privacyAccepted" required class="mt-1 h-4 w-4 text-primary-600 focus:ring-primary-500 border-secondary-300 rounded" />
                            <label for="privacyAccepted" class="ml-3 text-sm text-text-secondary">
                                I accept the <a href="javascript:void(0)" class="text-primary-600 hover:text-primary-700">Privacy Policy</a>
                            </label>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" id="submitBtn" class="w-full bg-primary-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-primary-700 focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-normal disabled:opacity-50 disabled:cursor-not-allowed">
                        <span id="submitText">Create Account</span>
                        <svg id="loadingSpinner" class="hidden animate-spin -ml-1 mr-3 h-5 w-5 text-white inline" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"/>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"/>
                        </svg>
                    </button>
                </form>

                <!-- Social Registration -->
                <div class="mt-8">
                    <div class="relative">
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-secondary-200"></div>
                        </div>
                        <div class="relative flex justify-center text-sm">
                            <span class="px-2 bg-surface text-text-secondary">Or continue with</span>
                        </div>
                    </div>

                    <div class="mt-6 grid grid-cols-2 gap-3">
                        <button type="button" class="w-full inline-flex justify-center py-3 px-4 border border-secondary-300 rounded-lg shadow-contextual-sm bg-surface text-sm font-medium text-text-secondary hover:bg-secondary-50 transition-colors duration-normal">
                            <img src="https://images.unsplash.com/photo-1573804633927-bfcbcd909acd?q=80&w=100&auto=format&fit=crop" alt="Google" class="w-5 h-5" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                            <span class="ml-2">Google</span>
                        </button>
                        <button type="button" class="w-full inline-flex justify-center py-3 px-4 border border-secondary-300 rounded-lg shadow-contextual-sm bg-surface text-sm font-medium text-text-secondary hover:bg-secondary-50 transition-colors duration-normal">
                            <img src="https://images.unsplash.com/photo-1611162617474-5b21e879e113?q=80&w=100&auto=format&fit=crop" alt="Facebook" class="w-5 h-5" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                            <span class="ml-2">Facebook</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Additional Links -->
            <div class="mt-8 text-center">
                <p class="text-sm text-text-secondary">
                    Need help? 
                    <a href="javascript:void(0)" class="text-primary-600 hover:text-primary-700 font-medium">Contact Support</a>
                </p>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-surface border-t border-secondary-200 py-8 mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <p class="text-sm text-text-secondary">
                    © 2025 FriendsVibe. All Rights Reserved.
                </p>
                <div class="mt-4 flex justify-center space-x-6">
                    <a href="javascript:void(0)" class="text-text-secondary hover:text-primary-600 text-sm">Privacy Policy</a>
                    <a href="javascript:void(0)" class="text-text-secondary hover:text-primary-600 text-sm">Terms of Service</a>
                    <a href="javascript:void(0)" class="text-text-secondary hover:text-primary-600 text-sm">Help Center</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Form validation and interaction logic
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('registrationForm');
            const profilePicture = document.getElementById('profilePicture');
            const profilePreview = document.getElementById('profilePreview');
            const togglePassword = document.getElementById('togglePassword');
            const password = document.getElementById('password');
            const submitBtn = document.getElementById('submitBtn');
            const submitText = document.getElementById('submitText');
            const loadingSpinner = document.getElementById('loadingSpinner');

            let profileImageData = null;

            // Profile picture preview
            profilePicture.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        profileImageData = e.target.result;
                        profilePreview.innerHTML = `<img src="${e.target.result}" alt="Profile Preview" class="w-full h-full object-cover rounded-full">`;
                    };
                    reader.readAsDataURL(file);
                }
            });

            // Toggle password visibility
            togglePassword.addEventListener('click', function() {
                const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
                password.setAttribute('type', type);
            });

            // Real-time validation
            const fields = ['fullName', 'username', 'email', 'password', 'confirmPassword'];
            
            fields.forEach(fieldName => {
                const field = document.getElementById(fieldName);
                const errorDiv = document.getElementById(fieldName + 'Error');
                const successDiv = document.getElementById(fieldName + 'Success');

                field.addEventListener('blur', function() {
                    validateField(fieldName, field.value, errorDiv, successDiv);
                });

                field.addEventListener('input', function() {
                    if (field.classList.contains('border-error-500')) {
                        validateField(fieldName, field.value, errorDiv, successDiv);
                    }
                });
            });

            function validateField(fieldName, value, errorDiv, successDiv) {
                let isValid = true;
                let errorMessage = '';

                switch(fieldName) {
                    case 'fullName':
                        if (value.length < 2) {
                            isValid = false;
                            errorMessage = 'Full name must be at least 2 characters';
                        }
                        break;
                    case 'username':
                        if (value.length < 3) {
                            isValid = false;
                            errorMessage = 'Username must be at least 3 characters';
                        } else if (!/^[a-zA-Z0-9_]+$/.test(value)) {
                            isValid = false;
                            errorMessage = 'Username can only contain letters, numbers, and underscores';
                        }
                        break;
                    case 'email':
                        if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) {
                            isValid = false;
                            errorMessage = 'Please enter a valid email address';
                        }
                        break;
                    case 'password':
                        if (value.length < 8) {
                            isValid = false;
                            errorMessage = 'Password must be at least 8 characters';
                        } else if (!/(?=.*[a-zA-Z])(?=.*\d)/.test(value)) {
                            isValid = false;
                            errorMessage = 'Password must contain both letters and numbers';
                        }
                        break;
                    case 'confirmPassword':
                        if (value !== document.getElementById('password').value) {
                            isValid = false;
                            errorMessage = 'Passwords do not match';
                        }
                        break;
                }

                const field = document.getElementById(fieldName);
                if (isValid && value) {
                    field.classList.remove('border-error-500');
                    field.classList.add('border-success-500');
                    errorDiv.classList.add('hidden');
                    successDiv.classList.remove('hidden');
                } else if (!isValid) {
                    field.classList.remove('border-success-500');
                    field.classList.add('border-error-500');
                    errorDiv.textContent = errorMessage;
                    errorDiv.classList.remove('hidden');
                    successDiv.classList.add('hidden');
                } else {
                    field.classList.remove('border-error-500', 'border-success-500');
                    errorDiv.classList.add('hidden');
                    successDiv.classList.add('hidden');
                }
            }

            // Form validation function
            function validateForm() {
                const fullName = document.getElementById('fullName').value.trim();
                const username = document.getElementById('username').value.trim();
                const email = document.getElementById('email').value.trim();
                const password = document.getElementById('password').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                const termsAccepted = document.getElementById('termsAccepted').checked;
                const privacyAccepted = document.getElementById('privacyAccepted').checked;

                // Check all required fields
                if (!fullName || fullName.length < 2) {
                    alert('Please enter a valid full name (at least 2 characters)');
                    return false;
                }

                if (!username || username.length < 3) {
                    alert('Please enter a valid username (at least 3 characters)');
                    return false;
                }

                if (!/^[a-zA-Z0-9_]+$/.test(username)) {
                    alert('Username can only contain letters, numbers, and underscores');
                    return false;
                }

                if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                    alert('Please enter a valid email address');
                    return false;
                }

                if (!password || password.length < 8) {
                    alert('Password must be at least 8 characters long');
                    return false;
                }

                if (!/(?=.*[a-zA-Z])(?=.*\d)/.test(password)) {
                    alert('Password must contain both letters and numbers');
                    return false;
                }

                if (password !== confirmPassword) {
                    alert('Passwords do not match');
                    return false;
                }

                if (!termsAccepted) {
                    alert('Please accept the Terms of Service');
                    return false;
                }

                if (!privacyAccepted) {
                    alert('Please accept the Privacy Policy');
                    return false;
                }

                return true;
            }

            // Form submission
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Validate the form
                if (!validateForm()) {
                    return;
                }

                // Show loading state
                submitBtn.disabled = true;
                submitText.textContent = 'Creating Account...';
                loadingSpinner.classList.remove('hidden');

                // Collect form data
                const formData = {
                    fullName: document.getElementById('fullName').value.trim(),
                    username: document.getElementById('username').value.trim(),
                    email: document.getElementById('email').value.trim(),
                    profilePicture: profileImageData,
                    joinDate: new Date().toISOString(),
                    bio: `Welcome to my profile! I'm excited to be part of the SocialConnect community.`,
                    location: 'Not specified',
                    website: '',
                    posts: 0,
                    followers: 0,
                    following: 0
                };

                // Store user data in localStorage
                try {
                    localStorage.setItem('socialConnect_userData', JSON.stringify(formData));
                    localStorage.setItem('socialConnect_isLoggedIn', 'true');
                    
                    // Simulate API call
                    setTimeout(() => {
                        // Show success message briefly
                        submitText.textContent = 'Account Created Successfully!';
                        
                        // Redirect to user profile after a short delay
                        setTimeout(() => {
                            window.location.href = 'user_profile.html';
                        }, 1000);
                    }, 2000);
                } catch (error) {
                    console.error('Error saving user data:', error);
                    
                    // Reset button state
                    submitBtn.disabled = false;
                    submitText.textContent = 'Create Account';
                    loadingSpinner.classList.add('hidden');
                    
                    alert('An error occurred while creating your account. Please try again.');
                }
            });
        });
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>